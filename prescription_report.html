<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>
<h2>Prescription Report</h2>

<label>Filter by Patient:</label>
<select id="patientFilter"></select>
<button onclick="loadPrescriptionReport()">Search</button>

<table border="1" width="100%" id="reportTable">
  <thead>
    <tr>
      <th>Date</th>
      <th>Patient Name</th>
      <th>Symptoms</th>
      <th>Remedies</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
  <script>
    function loadPatientDropdown() {
  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({
      action: "getPatients"
    })
  })
  .then(res => res.json())
  .then(data => {
    const select = document.getElementById("patientFilter");
    select.innerHTML = '<option value="">All Patients</option>';

    data.forEach(p => {
      select.innerHTML += `
        <option value="${p.id}">
          ${p.name}
        </option>`;
    });
  });
}
    function loadPrescriptionReport() {
  const patientId = document.getElementById("patientFilter").value;

  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({
      action: "getPrescriptionReport",
      patientId: patientId
    })
  })
  .then(res => res.json())
  .then(data => {
    const tbody = document.querySelector("#reportTable tbody");
    tbody.innerHTML = "";

    data.forEach(item => {
      tbody.innerHTML += `
        <tr>
          <td>${formatDate(item.date)}</td>
          <td>${item.patientName}</td>
          <td>${item.symptomes}</td>
          <td>${item.remedies}</td>
          <td>${item.usage}</td>
        </tr>
      `;
    });
  });
}
  </script>
  <script src="app.js"></script>
</body>
</html>
